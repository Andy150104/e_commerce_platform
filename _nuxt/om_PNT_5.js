import{p as $,q as j,v as k,y as F,Y as E,x as U,C as A,b1 as q,b2 as Y,b3 as z,z as O,e as G,l as I,S as _,b4 as W,s as H,f as X,g as Z,m as K,o as l,h as J,w as Q,i as t,c as f,a as s,b as c,G as C,b5 as P,n as g,A as x,j as b}from"./DFVm4NPh.js";import{_ as ee}from"./DrTYLynd.js";import{u as te,_ as se}from"./BbryYVfn.js";import{_ as re}from"./CNpP0kGe.js";import{_ as ae}from"./Ddd57dIF.js";import{_ as ie}from"./Bfgw1-s2.js";import{_ as oe}from"./BnmkgdtR.js";import{u as L,_ as ne}from"./CwrryA99.js";import le from"./3OUur2A8.js";import{X as v}from"./BDEeDIwr.js";import"./Dw6ZVRj5.js";/* empty css        */import"./CMS-NkLX.js";import"./DfFDNbgx.js";import"./DgmwlLno.js";import"./Bzy3NznM.js";import"./DlAUqK2U.js";import"./V8n92ecy.js";import"./DPxmNygB.js";import"./DsIA2G5F.js";import"./BKCMpDB6.js";import"./PLEq0hNF.js";import"./0qAV6zC5.js";import"./B33bflHF.js";import"./DxTMCm_i.js";import"./B1VAvD7b.js";import"./5Q-RKaCz.js";import"./h9XeG6ng.js";import"./Bug8ffv2.js";import"./DqbQgBaR.js";import"./BpXJ3t4k.js";import"./B05HPIib.js";import"./D5y8FroI.js";import"./BuMp5kCj.js";import"./Bj-PnIja.js";import"./QbBb9rFs.js";const S={phoneNumber:"",birthday:"",gender:"1",province:"",district:"",ward:"",addressLine:""},ce=$(S),de={values:S,errors:ce,...O},me=j("Verify",{state:()=>({fields:de,createFlgAccountInfo:!1,createFlgPlan:!1,createFlgPersonalInfo:!1,createFlgComplete:!1}),getters:{fieldValues:r=>r.fields.values,fieldValid:r=>r.fields.meta.valid,fieldErrors:r=>r.fields.errors},actions:{ResetStore(){this.fields.resetForm()},SetFields(r){this.fields=r},async Validate(){return await this.fields.validate(),this.fieldValid},async onVerify(r){const d=k(),o=F();o.LoadingChange(!0);const a=await d.api.v1.UserVerifyKey.$post({body:{isOnlyValidation:!1,key:r}});return o.LoadingChange(!1),!!a.success},async RegisterUserClient(r){var y;if((await this.fields.validate()).valid===!1)return!1;const o=E(),a=U();L();const e=A(this.fields.values,S),h=F();h.LoadingChange(!0);const n=await o.api.v1.URSUserRegister.$post({body:{key:r,addressLine:e.addressLine,birthDay:q(e.birthday,Y.YYYYMMDD),city:e.district,district:e.district,gender:Number(e.gender),imageUrl:"https://plus.unsplash.com/premium_photo-1664474619075-644dd191935f?fm=jpg&q=60&w=3000&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8aW1hZ2V8ZW58MHx8MHx8fDA%3D",phoneNumber:(y=z(e.phoneNumber))==null?void 0:y.toString(),province:e.province,ward:e.ward}});return h.LoadingChange(!1),n.success?(a.SetFormMessage(n,!0),this.activeAccount(r),!0):(a.SetFormMessage(n,!0),!1)},async activeAccount(r){const d=k(),o=U();A(this.fields.values,S);const a=F();a.LoadingChange(!0);const e=await d.api.v1.UserInsertVerify.$post({body:{isOnlyValidation:!1,key:r}});return a.LoadingChange(!1),e.success?(o.SetFormMessage(e,!0),!0):(o.SetFormMessage(e,!0),!1)}}}),ue={key:0},pe={class:"mb-10 animate-jump-in animate-once animate-ease-linear"},fe={class:"space-y-6"},ge={class:"grid grid-cols-1 md:grid-cols-2 gap-6 animate-fade-right"},ve={class:"space-y-4"},he={class:"w-full"},ye=["src"],_e={key:1,class:"rounded-full object-cover mx-auto aspect-square w-40 h-40 md:w-64 md:h-64",src:"https://static.vecteezy.com/system/resources/previews/009/292/244/non_2x/default-avatar-icon-of-social-media-user-vector.jpg",alt:"image description"},xe={class:"space-y-4"},be={class:"space-y-4"},Se={class:"space-y-4"},we={class:"space-y-6"},Fe={class:"grid grid-cols-1 animate-fade-right"},nt=G({__name:"verify",setup(r){const d=I([{nameItem:"Account Info",status:_.currentStep},{nameItem:"Verify Account",status:_.currentStep},{nameItem:"Personal Info",status:_.currentStep},{nameItem:"Plan Supscription",status:_.pendingStep},{nameItem:"Ending",status:_.finishStep}]),o=L(),a=te(),e=me(),h=I(!1),n=I(!1),y=W(),{fieldValues:V,fieldErrors:m}=H(e),M=X({initialValues:V.value});e.SetFields(M);const u={phoneNumber:v({id:"phoneNumber",name:"Phone Number",rules:"required",visible:!0,option:""}),birthday:v({id:"birthday",name:"Birthday",rules:"",visible:!0,option:""}),gender:v({id:"gender",name:"Gender",rules:"required",visible:!0,option:""}),province:v({id:"province",name:"Provice",rules:"",visible:!0,option:""}),district:v({id:"district",name:"District",rules:"",visible:!0,option:""}),ward:v({id:"ward",name:"Ward",rules:"",visible:!0,option:""})},p=(w,i,D,R)=>{e.createFlgAccountInfo=w,e.createFlgPersonalInfo=i,e.createFlgPlan=D,e.createFlgComplete=R},T=async()=>{if(n.value=!0,e.createFlgPlan){e.RegisterUserClient(String(y.query.key)),p(!1,!1,!1,!0);return}},B=async()=>{if(n.value=!0,a.moveToNextStep(),e.createFlgPersonalInfo)return p(!1,!1,!0,!1)},N=()=>{if(e.createFlgAccountInfo&&(window.location.href=document.referrer),a.moveToPreviousStep(),e.createFlgPersonalInfo)return p(!0,!1,!1,!1);if(e.createFlgPlan)return p(!1,!0,!1,!1);if(e.createFlgComplete)return p(!1,!1,!0,!1)};return Z(async()=>{await K().isReady(),await e.onVerify(String(y.query.key))&&(h.value=!0,p(!1,!0,!1,!1)),a.SetValues(d),a.currentIndex=2}),(w,i)=>(l(),J(le,null,{body:Q(()=>[t(h)?(l(),f("div",ue,[i[4]||(i[4]=s("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white text-center mb-8 pt-4"},"Register",-1)),s("div",pe,[c(se,{items:t(a).steppList},null,8,["items"])]),C(s("div",null,[C(s("div",fe,[i[0]||(i[0]=s("h2",{class:"text-2xl font-semibold"},"Personal Information",-1)),i[1]||(i[1]=s("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Use a permanent address where you can receive mail.",-1)),s("div",ge,[s("div",ve,[s("div",he,[t(o).uploadImage.length>0?(l(),f("img",{key:0,class:"rounded-full object-cover mx-auto aspect-square w-40 h-40 md:w-64 md:h-64",src:t(o).uploadImage[0].imagePreview,alt:"image description"},null,8,ye)):(l(),f("img",_e))])]),s("div",xe,[s("div",null,[c(oe,{"xml-column":u.phoneNumber,maxlength:50,disabled:!1,"err-msg":t(m).phoneNumber,placeholder:"123456789"},null,8,["xml-column","err-msg"])]),s("div",null,[c(ae,{"xml-column":u.birthday,"err-msg":t(m).birthday,disabled:!1,maxlength:10,"date-model":"11/1/2002","is-inline":!1,"date-picker-position":"top left"},null,8,["xml-column","err-msg"]),c(ie,{"xml-column":u.gender,model:t(V).gender,disabled:!1,"err-msg":t(m).gender,"master-name":"Gender"},null,8,["xml-column","model","err-msg"])])]),s("div",be,[c(ne,{"max-number-image":1,"is-show-popover":!1,label:"Upload avatar image"})]),s("div",Se,[s("div",null,[c(re,{"xml-column-province":u.province,"maxlength-province":50,"disabled-province":!1,"err-msg-province":t(m).province,"placeholder-province":"Province","xml-column-district":u.district,"maxlength-district":50,"disabled-district":!1,"err-msg-district":t(m).district,"placeholder-district":"District","xml-column-ward":u.ward,"maxlength-ward":50,"disabled-ward":!1,"err-msg-ward":t(m).ward,"placeholder-ward":"Ward"},null,8,["xml-column-province","err-msg-province","xml-column-district","err-msg-district","xml-column-ward","err-msg-ward"])])])])],512),[[P,t(e).createFlgPersonalInfo]]),s("div",{class:g(t(e).createFlgPersonalInfo?"flex justify-end mt-8":"flex justify-between mt-8")},[t(e).createFlgPersonalInfo?b("",!0):(l(),f("button",{key:0,class:g(t(x).BUTTON_DEFAULT_GRAY_1),onClick:N},"Back",2)),s("button",{class:g(t(x).BUTTON_DEFAULT_BLUE_2),onClick:B},"Next",2)],2)],512),[[P,t(e).createFlgPersonalInfo]]),C(s("div",we,[i[2]||(i[2]=s("h2",{class:"text-2xl font-semibold"},"Plan Supscription",-1)),i[3]||(i[3]=s("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Use a permanent address where you can receive mail.",-1)),s("div",Fe,[c(ee)]),s("div",{class:g(t(e).createFlgPersonalInfo?"flex justify-end mt-8 pb-6":"flex justify-between mt-8 pb-6")},[t(e).createFlgPersonalInfo?b("",!0):(l(),f("button",{key:0,class:g(t(x).BUTTON_DEFAULT_GRAY_1),onClick:N},"Back",2)),t(n)?(l(),f("button",{key:1,class:g(t(x).BUTTON_DEFAULT_BLUE_2),onClick:T},"Next",2)):b("",!0)],2)],512),[[P,t(e).createFlgPlan]])])):b("",!0)]),_:1}))}});export{nt as default};
