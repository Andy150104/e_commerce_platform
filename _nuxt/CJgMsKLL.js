import{_ as E}from"./BgQU1iFT.js";import{_ as S}from"./D0GLTrGt.js";import{p as q,q as v,Y as m,y as g,x as h,z as F,e as I,l as B,s as w,f as V,g as b,o as R,h as C,w as _,a as d,b as M,i as T,L as k}from"./DFVm4NPh.js";import{X as s}from"./BDEeDIwr.js";import"./CNgG3cJA.js";import"./B05HPIib.js";import"./D5y8FroI.js";import"./BuMp5kCj.js";import"./BpXJ3t4k.js";import"./DPWrjAok.js";import"./DqbQgBaR.js";/* empty css        */import"./uhLm67I1.js";import"./D8p04lkY.js";import"./DlAUqK2U.js";import"./awSMyq0J.js";import"./Bj-PnIja.js";import"./B_7wH41M.js";import"./QbBb9rFs.js";import"./B1VAvD7b.js";import"./5Q-RKaCz.js";import"./BCNAepu4.js";import"./0qAV6zC5.js";const x={requestId:"",exchangeId:"",description:"",status:1,isActive:!0,createdAt:"",createdBy:"",updatedBy:"",updatedAt:"",isAccepted:!0},G=q(x),L={values:x,errors:G,...F},U=v("DBExchange",{state:()=>({fields:L,uAEPSGetExchangeRecheckRequestAccessoryEntity:[]}),getters:{fieldValues:a=>a.fields.values,fieldValid:a=>a.fields.meta.valid,fieldErrors:a=>a.fields.errors},actions:{ResetStore(){this.fields.resetForm()},SetFields(a){this.fields=a},async Validate(){return await this.fields.validate(),this.fieldValid},async GetExchange(){const a=m(),e=g();e.LoadingChange(!0);const i=await a.api.v1.AEPSGetExchangeRecheckRequestAccessory.$get({});e.LoadingChange(!1),i.response&&(this.uAEPSGetExchangeRecheckRequestAccessoryEntity=i.response)},async ManageExchange(a,e){const i=m(),o=g();o.LoadingChange(!0);const n=await i.api.v1.AEPSCheckExchangeRecheckRequestAccessory.$post({body:{requestId:a,isAccepted:e}});return o.LoadingChange(!1),n.response?(h().SetFormMessage(n,!0),!0):(h().SetFormMessage(n,!0),!1)}}}),z={class:"animate-fade-left animate-ease-out animate-delay-100 p-10 md:max-w-none md:p-12 lg:p-30 rounded-xl mb-16 max-w-screen-lg mx-auto h-auto overflow-hidden"},le=I({__name:"index",setup(a){const e=U(),i=B(""),{fieldValues:o,fieldErrors:n}=w(e),l=V({initialValues:o.value});e.SetFields(l),s({id:"requestId",name:"Request Id",rules:"required",visible:!0,option:""}),s({id:"exchangeId",name:"Exchange Id",rules:"required",visible:!0,option:""}),s({id:"createdAt",name:"Created At",rules:"required",visible:!0,option:""}),s({id:"createdBy",name:"Created By",rules:"required",visible:!0,option:""}),s({id:"description",name:"Description",rules:"required",visible:!0,option:""}),s({id:"updatedBy",name:"Updated By",rules:"required",visible:!0,option:""}),s({id:"updatedAt",name:"Updated At",rules:"",visible:!0,option:""});const c=[{field:"requestId",header:"Request Id",isFilter:!0,isSort:!0,filterType:"text"},{field:"exchangeId",header:"Exchange Id",isFilter:!0,isSort:!0,filterType:"text"},{field:"description",header:"Description",isFilter:!0,isSort:!0,filterType:"text"},{field:"createdAt",header:"Created At",isFilter:!0,isSort:!0,filterType:"text"},{field:"createdBy",header:"Created By",isFilter:!0,isSort:!0,filterType:"text"},{field:"updatedBy",header:"Updated By",isFilter:!0,isSort:!0,filterType:"text"},{field:"updatedAt",header:"Updated At",isFilter:!0,isSort:!0,filterType:"text"},{field:"status",header:"Status",isFilter:!0,isSort:!0,filterType:"byte"},{field:"isActive",header:"Is Active",isFilter:!0,isSort:!0,filterType:"boolean"}],y=async t=>{await k(),e.fields.setFieldValue("requestId",t.requestId),e.fields.setFieldValue("exchangeId",t.exchangeId),e.fields.setFieldValue("status",t.status),e.fields.setFieldValue("isActive",t.isActive),e.fields.setFieldValue("createdAt",t.createdAt),e.fields.setFieldValue("createdBy",t.createdBy),e.fields.setFieldValue("updatedBy",t.updatedBy),e.fields.setFieldValue("updatedAt",t.updatedAt),i.value=t.description},A=async t=>{try{console.log("Item nhận được:",t);const{requestId:r,isAccepted:f}=t;console.log("requestId:",r),console.log("isAccepted:",f),f?await u(r):await p(r)}catch(r){console.error("Error toggling request status:",r)}},u=async t=>{try{await e.ManageExchange(t,!0),await e.GetExchange()}catch(r){console.error("Error accepting request:",r)}},p=async t=>{try{await e.ManageExchange(t,!1),await e.GetExchange()}catch(r){console.error("Error unaccepting request:",r)}};return b(async()=>{await e.GetExchange()}),(t,r)=>(R(),C(S,null,{body:_(()=>[r[0]||(r[0]=d("div",{class:"max-w-3xl mx-auto text-center relative z-10 mt-0 pt-0"},[d("h1",{class:"text-4xl font-bold text-black dark:text-white mb-4 animate-fade-up animate-duration-1000 animate-delay-500"},"Manage Exchange Requests"),d("p",{class:"text-lg text-gray-700 mb-8 animate-fade-up animate-duration-1000 animate-delay-500"},"Manage Exchange Recheck Request!"),d("div",{class:"mt-8 flex justify-center space-x-4"})],-1)),d("div",z,[M(E,{items:T(e).uAEPSGetExchangeRecheckRequestAccessoryEntity,columns:c,"is-selected-columns":!0,onOnBindingUpdateData:y,onOnToggleStatus:A,onOnAccept:u,onOnUnaccept:p,"default-fields-select":["requestId","status"],showActions:!1},null,8,["items"])])]),_:1}))}});export{le as default};
