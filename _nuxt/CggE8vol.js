import Z from"./DPxmNygB.js";import G from"./DsIA2G5F.js";import X from"./CIRq1r2p.js";import{_ as Y}from"./PLEq0hNF.js";import{e as C,l as k,D as S,ct as oe,g as ee,K as ue,d8 as le,L as D,c5 as re,dn as se,dp as ie,dq as z,U as _,o as h,h as O,w as P,b as $,O as q,a as Q,c as R,n as T,F as L,r as F,P as H,j as U,t as x,d as de,an as pe,aL as ce}from"./DFVm4NPh.js";import{u as me}from"./B3m6dROT.js";import{_ as fe}from"./DlAUqK2U.js";import{o as I,u as ve,A as N,i as j,N as J,a as f}from"./DRmxXga8.js";import{w as be}from"./q00Ry1bX.js";import{s as ge}from"./BHeKWSUs.js";import{p as Ie}from"./3SqdZs2x.js";import{i as Me,u as ye,f as he,c as y}from"./DFNzxcBI.js";import{t as Se,i as B,l as ke}from"./22etpbUe.js";import{w as Pe,h as we,v as Re,N as W,_ as te,O as Te}from"./DxdRxZrz.js";import{o as De}from"./B3PgtydS.js";import"./0qAV6zC5.js";import"./B33bflHF.js";import"./DxTMCm_i.js";import"./5Q-RKaCz.js";import"./Ds-y25X3.js";import"./CAb_97xm.js";import"./adkIYQe8.js";import"./Sprb8a3n.js";import"./BpMd8du9.js";import"./BpbWEv0s.js";import"./-mdl1zzC.js";import"./CzO2N3BU.js";var Oe=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(Oe||{}),Ce=(t=>(t[t.Pointer=0]="Pointer",t[t.Other=1]="Other",t))(Ce||{});function Ae(t){requestAnimationFrame(()=>requestAnimationFrame(t))}let ne=Symbol("MenuContext");function E(t){let d=re(ne,null);if(d===null){let p=new Error(`<${t} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(p,E),p}return d}let _e=C({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(t,{slots:d,attrs:p}){let v=k(1),c=k(null),m=k(null),e=k([]),r=k(""),l=k(null),b=k(1);function M(n=o=>o){let o=l.value!==null?e.value[l.value]:null,a=Te(n(e.value.slice()),g=>I(g.dataRef.domRef)),i=o?a.indexOf(o):null;return i===-1&&(i=null),{items:a,activeItemIndex:i}}let s={menuState:v,buttonRef:c,itemsRef:m,items:e,searchQuery:r,activeItemIndex:l,activationTrigger:b,closeMenu:()=>{v.value=1,l.value=null},openMenu:()=>v.value=0,goToItem(n,o,a){let i=M(),g=he(n===y.Specific?{focus:y.Specific,id:o}:{focus:n},{resolveItems:()=>i.items,resolveActiveIndex:()=>i.activeItemIndex,resolveId:u=>u.id,resolveDisabled:u=>u.dataRef.disabled});r.value="",l.value=g,b.value=a??1,e.value=i.items},search(n){let o=r.value!==""?0:1;r.value+=n.toLowerCase();let a=(l.value!==null?e.value.slice(l.value+o).concat(e.value.slice(0,l.value+o)):e.value).find(g=>g.dataRef.textValue.startsWith(r.value)&&!g.dataRef.disabled),i=a?e.value.indexOf(a):-1;i===-1||i===l.value||(l.value=i,b.value=1)},clearSearch(){r.value=""},registerItem(n,o){let a=M(i=>[...i,{id:n,dataRef:o}]);e.value=a.items,l.value=a.activeItemIndex,b.value=1},unregisterItem(n){let o=M(a=>{let i=a.findIndex(g=>g.id===n);return i!==-1&&a.splice(i,1),a});e.value=o.items,l.value=o.activeItemIndex,b.value=1}};return be([c,m],(n,o)=>{var a;s.closeMenu(),Pe(o,we.Loose)||(n.preventDefault(),(a=I(c))==null||a.focus())},S(()=>v.value===0)),oe(ne,s),Se(S(()=>ve(v.value,{0:B.Open,1:B.Closed}))),()=>{let n={open:v.value===0,close:s.closeMenu};return N({ourProps:{},theirProps:t,slot:n,slots:d,attrs:p,name:"Menu"})}}}),$e=C({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(t,{attrs:d,slots:p,expose:v}){var c;let m=(c=t.id)!=null?c:`headlessui-menu-button-${j()}`,e=E("MenuButton");v({el:e.buttonRef,$el:e.buttonRef});function r(s){switch(s.key){case f.Space:case f.Enter:case f.ArrowDown:s.preventDefault(),s.stopPropagation(),e.openMenu(),D(()=>{var n;(n=I(e.itemsRef))==null||n.focus({preventScroll:!0}),e.goToItem(y.First)});break;case f.ArrowUp:s.preventDefault(),s.stopPropagation(),e.openMenu(),D(()=>{var n;(n=I(e.itemsRef))==null||n.focus({preventScroll:!0}),e.goToItem(y.Last)});break}}function l(s){switch(s.key){case f.Space:s.preventDefault();break}}function b(s){t.disabled||(e.menuState.value===0?(e.closeMenu(),D(()=>{var n;return(n=I(e.buttonRef))==null?void 0:n.focus({preventScroll:!0})})):(s.preventDefault(),e.openMenu(),Ae(()=>{var n;return(n=I(e.itemsRef))==null?void 0:n.focus({preventScroll:!0})})))}let M=ge(S(()=>({as:t.as,type:d.type})),e.buttonRef);return()=>{var s;let n={open:e.menuState.value===0},{...o}=t,a={ref:e.buttonRef,id:m,type:M.value,"aria-haspopup":"menu","aria-controls":(s=I(e.itemsRef))==null?void 0:s.id,"aria-expanded":e.menuState.value===0,onKeydown:r,onKeyup:l,onClick:b};return N({ourProps:a,theirProps:o,slot:n,attrs:d,slots:p,name:"MenuButton"})}}}),Be=C({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(t,{attrs:d,slots:p,expose:v}){var c;let m=(c=t.id)!=null?c:`headlessui-menu-items-${j()}`,e=E("MenuItems"),r=k(null);v({el:e.itemsRef,$el:e.itemsRef}),Me({container:S(()=>I(e.itemsRef)),enabled:S(()=>e.menuState.value===0),accept(n){return n.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:n.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(n){n.setAttribute("role","none")}});function l(n){var o;switch(r.value&&clearTimeout(r.value),n.key){case f.Space:if(e.searchQuery.value!=="")return n.preventDefault(),n.stopPropagation(),e.search(n.key);case f.Enter:if(n.preventDefault(),n.stopPropagation(),e.activeItemIndex.value!==null){let a=e.items.value[e.activeItemIndex.value];(o=I(a.dataRef.domRef))==null||o.click()}e.closeMenu(),te(I(e.buttonRef));break;case f.ArrowDown:return n.preventDefault(),n.stopPropagation(),e.goToItem(y.Next);case f.ArrowUp:return n.preventDefault(),n.stopPropagation(),e.goToItem(y.Previous);case f.Home:case f.PageUp:return n.preventDefault(),n.stopPropagation(),e.goToItem(y.First);case f.End:case f.PageDown:return n.preventDefault(),n.stopPropagation(),e.goToItem(y.Last);case f.Escape:n.preventDefault(),n.stopPropagation(),e.closeMenu(),D(()=>{var a;return(a=I(e.buttonRef))==null?void 0:a.focus({preventScroll:!0})});break;case f.Tab:n.preventDefault(),n.stopPropagation(),e.closeMenu(),D(()=>Re(I(e.buttonRef),n.shiftKey?W.Previous:W.Next));break;default:n.key.length===1&&(e.search(n.key),r.value=setTimeout(()=>e.clearSearch(),350));break}}function b(n){switch(n.key){case f.Space:n.preventDefault();break}}let M=ke(),s=S(()=>M!==null?(M.value&B.Open)===B.Open:e.menuState.value===0);return()=>{var n,o;let a={open:e.menuState.value===0},{...i}=t,g={"aria-activedescendant":e.activeItemIndex.value===null||(n=e.items.value[e.activeItemIndex.value])==null?void 0:n.id,"aria-labelledby":(o=I(e.buttonRef))==null?void 0:o.id,id:m,onKeydown:l,onKeyup:b,role:"menu",tabIndex:0,ref:e.itemsRef};return N({ourProps:g,theirProps:i,slot:a,attrs:d,slots:p,features:J.RenderStrategy|J.Static,visible:s.value,name:"MenuItems"})}}}),Ne=C({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(t,{slots:d,attrs:p,expose:v}){var c;let m=(c=t.id)!=null?c:`headlessui-menu-item-${j()}`,e=E("MenuItem"),r=k(null);v({el:r,$el:r});let l=S(()=>e.activeItemIndex.value!==null?e.items.value[e.activeItemIndex.value].id===m:!1),b=Ie(r),M=S(()=>({disabled:t.disabled,get textValue(){return b()},domRef:r}));ee(()=>e.registerItem(m,M)),ue(()=>e.unregisterItem(m)),le(()=>{e.menuState.value===0&&l.value&&e.activationTrigger.value!==0&&D(()=>{var u,w;return(w=(u=I(r))==null?void 0:u.scrollIntoView)==null?void 0:w.call(u,{block:"nearest"})})});function s(u){if(t.disabled)return u.preventDefault();e.closeMenu(),te(I(e.buttonRef))}function n(){if(t.disabled)return e.goToItem(y.Nothing);e.goToItem(y.Specific,m)}let o=ye();function a(u){o.update(u)}function i(u){o.wasMoved(u)&&(t.disabled||l.value||e.goToItem(y.Specific,m,0))}function g(u){o.wasMoved(u)&&(t.disabled||l.value&&e.goToItem(y.Nothing))}return()=>{let{disabled:u,...w}=t,A={active:l.value,disabled:u,close:e.closeMenu};return N({ourProps:{id:m,ref:r,role:"menuitem",tabIndex:u===!0?void 0:-1,"aria-disabled":u===!0?!0:void 0,onClick:s,onFocus:n,onPointerenter:a,onMouseenter:a,onPointermove:i,onMousemove:i,onPointerleave:g,onMouseleave:g},theirProps:{...p,...w},slot:A,attrs:p,slots:d,name:"MenuItem"})}}});const Ee=C({components:{HMenu:_e,HMenuButton:$e,HMenuItems:Be,HMenuItem:Ne,UIcon:Z,UAvatar:G,UKbd:X,ULink:Y},props:{items:{type:Array,default:()=>[]},mode:{type:String,default:"click",validator:t=>["click","hover"].includes(t)},disabled:{type:Boolean,default:!1},popper:{type:Object,default:()=>({})},openDelay:{type:Number,default:50},closeDelay:{type:Number,default:0},ui:{type:Object,default:()=>se.ui.dropdown}},setup(t){const d=ie(),p=S(()=>z({},t.ui,d.ui.dropdown)),v=S(()=>z(t.mode==="hover"?{offsetDistance:0}:{},t.popper,p.value.popper)),[c,m]=me(v.value),e=k(null);let r=null,l=null;ee(()=>{setTimeout(()=>{var a;const n=(a=c.value)==null?void 0:a.$.provides;if(!n)return;const o=Object.getOwnPropertySymbols(n);e.value=o.length&&n[o[0]]},200)});const b=S(()=>{var o,a;const n=((o=t.popper)==null?void 0:o.offsetDistance)||((a=p.value.popper)==null?void 0:a.offsetDistance)||8;return t.mode==="hover"?{paddingTop:`${n}px`,paddingBottom:`${n}px`}:{}});function M(){t.mode!=="hover"||!e.value||(l&&(clearTimeout(l),l=null),e.value.menuState!==0&&(r=r||setTimeout(()=>{e.value.openMenu&&e.value.openMenu(),r=null},t.openDelay)))}function s(){t.mode!=="hover"||!e.value||(r&&(clearTimeout(r),r=null),e.value.menuState!==1&&(l=l||setTimeout(()=>{e.value.closeMenu&&e.value.closeMenu(),l=null},t.closeDelay)))}return{ui:p,trigger:c,container:m,containerStyle:b,onMouseOver:M,onMouseLeave:s,omit:De}}}),Le=["disabled"],Fe={class:"truncate"};function He(t,d,p,v,c,m){const e=_("HMenuButton"),r=Z,l=G,b=X,M=Y,s=_("HMenuItem"),n=_("HMenuItems"),o=_("HMenu");return h(),O(o,{as:"div",class:T(t.ui.wrapper),onMouseleave:t.onMouseLeave},{default:P(({open:a})=>[$(e,{ref:"trigger",as:"div",disabled:t.disabled,class:"inline-flex w-full",role:"button",onMouseover:t.onMouseOver},{default:P(()=>[q(t.$slots,"default",{open:a,disabled:t.disabled},()=>[Q("button",{disabled:t.disabled}," Open ",8,Le)])]),_:2},1032,["disabled","onMouseover"]),a&&t.items.length?(h(),R("div",{key:0,ref:"container",class:T([t.ui.container,t.ui.width]),style:ce(t.containerStyle),onMouseover:d[0]||(d[0]=(...i)=>t.onMouseOver&&t.onMouseOver(...i))},[$(pe,H({appear:""},t.ui.transition),{default:P(()=>[$(n,{class:T([t.ui.base,t.ui.divide,t.ui.ring,t.ui.rounded,t.ui.shadow,t.ui.background,t.ui.height]),static:""},{default:P(()=>[(h(!0),R(L,null,F(t.items,(i,g)=>(h(),R("div",{key:g,class:T(t.ui.padding)},[(h(!0),R(L,null,F(i,(u,w)=>(h(),O(s,{key:w,disabled:u.disabled},{default:P(({active:A,disabled:ae})=>[$(M,H({ref_for:!0},t.omit(u,["label","slot","icon","iconClass","avatar","shortcuts","disabled","click"]),{class:[t.ui.item.base,t.ui.item.padding,t.ui.item.size,t.ui.item.rounded,A?t.ui.item.active:t.ui.item.inactive,ae&&t.ui.item.disabled],onClick:u.click}),{default:P(()=>[q(t.$slots,u.slot||"item",{item:u},()=>{var K;return[u.icon?(h(),O(r,{key:0,name:u.icon,class:T([t.ui.item.icon.base,A?t.ui.item.icon.active:t.ui.item.icon.inactive,u.iconClass])},null,8,["name","class"])):u.avatar?(h(),O(l,H({key:1,ref_for:!0},{size:t.ui.item.avatar.size,...u.avatar},{class:t.ui.item.avatar.base}),null,16,["class"])):U("",!0),Q("span",Fe,x(u.label),1),(K=u.shortcuts)!=null&&K.length?(h(),R("span",{key:2,class:T(t.ui.item.shortcuts)},[(h(!0),R(L,null,F(u.shortcuts,V=>(h(),O(b,{key:V},{default:P(()=>[de(x(V),1)]),_:2},1024))),128))],2)):U("",!0)]})]),_:2},1040,["class","onClick"])]),_:2},1032,["disabled"]))),128))],2))),128))]),_:3},8,["class"])]),_:3},16)],38)):U("",!0)]),_:3},8,["class","onMouseleave"])}const mt=fe(Ee,[["render",He]]);export{mt as default};
