import{c as k,i as y}from"./DxdRxZrz.js";import{d8 as S,l as d,bX as M,e as m,ct as b,c5 as c,D as B,g as F,af as L,K as C,bo as N,cx as O,bT as $}from"./DFVm4NPh.js";import{a as I}from"./q00Ry1bX.js";import{u as A,f as G}from"./DfbMX9JH.js";import{o as h,A as w}from"./DRmxXga8.js";function V(e,t,n,r){k.isServer||S(s=>{e=e??window,e.addEventListener(t,n,r),s(()=>e.removeEventListener(t,n,r))})}var U=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(U||{});function Y(){let e=d(0);return I("keydown",t=>{t.key==="Tab"&&(e.value=t.shiftKey?1:0)}),e}function Z({defaultContainers:e=[],portals:t,mainTreeNodeRef:n}={}){let r=d(null),s=y(r);function a(){var u,o,p;let i=[];for(let l of e)l!==null&&(l instanceof HTMLElement?i.push(l):"value"in l&&l.value instanceof HTMLElement&&i.push(l.value));if(t!=null&&t.value)for(let l of t.value)i.push(l);for(let l of(u=s==null?void 0:s.querySelectorAll("html > *, body > *"))!=null?u:[])l!==document.body&&l!==document.head&&l instanceof HTMLElement&&l.id!=="headlessui-portal-root"&&(l.contains(h(r))||l.contains((p=(o=h(r))==null?void 0:o.getRootNode())==null?void 0:p.host)||i.some(v=>l.contains(v))||i.push(l));return i}return{resolveContainers:a,contains(u){return a().some(o=>o.contains(u))},mainTreeNodeRef:r,MainTreeNode(){return n!=null?null:M(G,{features:A.Hidden,ref:r})}}}let H=Symbol("ForcePortalRootContext");function q(){return c(H,!1)}let _=m({name:"ForcePortalRoot",props:{as:{type:[Object,String],default:"template"},force:{type:Boolean,default:!1}},setup(e,{slots:t,attrs:n}){return b(H,e.force),()=>{let{force:r,...s}=e;return w({theirProps:s,ourProps:{},slot:{},slots:t,attrs:n,name:"ForcePortalRoot"})}}});function D(e){let t=y(e);if(!t){if(e===null)return null;throw new Error(`[Headless UI]: Cannot find ownerDocument for contextElement: ${e}`)}let n=t.getElementById("headlessui-portal-root");if(n)return n;let r=t.createElement("div");return r.setAttribute("id","headlessui-portal-root"),t.body.appendChild(r)}const g=new WeakMap;function K(e){var t;return(t=g.get(e))!=null?t:0}function x(e,t){let n=t(K(e));return n<=0?g.delete(e):g.set(e,n),n}let ee=m({name:"Portal",props:{as:{type:[Object,String],default:"div"}},setup(e,{slots:t,attrs:n}){let r=d(null),s=B(()=>y(r)),a=q(),u=c(R,null),o=d(a===!0||u==null?D(r.value):u.resolveTarget());o.value&&x(o.value,f=>f+1);let p=d(!1);F(()=>{p.value=!0}),S(()=>{a||u!=null&&(o.value=u.resolveTarget())});let i=c(P,null),l=!1,v=$();return L(r,()=>{if(l||!i)return;let f=h(r);f&&(C(i.register(f),v),l=!0)}),C(()=>{var f,E;let T=(f=s.value)==null?void 0:f.getElementById("headlessui-portal-root");!T||o.value!==T||x(o.value,j=>j-1)||o.value.children.length>0||(E=o.value.parentElement)==null||E.removeChild(o.value)}),()=>{if(!p.value||o.value===null)return null;let f={ref:r,"data-headlessui-portal":""};return M(N,{to:o.value},w({ourProps:f,theirProps:e,slot:{},attrs:n,slots:t,name:"Portal"}))}}}),P=Symbol("PortalParentContext");function te(){let e=c(P,null),t=d([]);function n(a){return t.value.push(a),e&&e.register(a),()=>r(a)}function r(a){let u=t.value.indexOf(a);u!==-1&&t.value.splice(u,1),e&&e.unregister(a)}let s={register:n,unregister:r,portals:t};return[t,m({name:"PortalWrapper",setup(a,{slots:u}){return b(P,s),()=>{var o;return(o=u.default)==null?void 0:o.call(u)}}})]}let R=Symbol("PortalGroupContext"),re=m({name:"PortalGroup",props:{as:{type:[Object,String],default:"template"},target:{type:Object,default:null}},setup(e,{attrs:t,slots:n}){let r=O({resolveTarget(){return e.target}});return b(R,r),()=>{let{target:s,...a}=e;return w({theirProps:a,ourProps:{},slot:{},attrs:t,slots:n,name:"PortalGroup"})}}});export{ee as $,V as E,Z as N,U as d,Y as n,te as q,_ as u,re as z};
