import{ba as b,bb as F,bc as H,q as M,Y as I,x as U,e as V,A as S,l as x,D as j,K as W,g as O,o as m,c as $,b as N,a as z,i as y,I as K,n as Y,F as k,r as T,j as J,L as A,b0 as Q,t as D,b7 as L,b9 as _}from"./DFVm4NPh.js";import{u as X}from"./DgmwlLno.js";import{_ as Z}from"./Bzy3NznM.js";import{_ as ee}from"./DlAUqK2U.js";const te=({baseURL:n,fetch:s})=>{const t=(n===void 0?"":n).replace(/\/$/,""),d="/api",i="/api/d",h="/api/d/search",f="/api/p",q="/api/p/search",l="/api/version",C="/api/w",g="/api/w/search",a="GET";return{api:{d:{_code:e=>{const r=`${i}/${e}`;return{get:o=>s(t,r,a,o).json(),$get:o=>s(t,r,a,o).json().then(v=>v.body),$path:o=>`${t}${r}${o&&o.query?`?${b(o.query)}`:""}`}},search:{get:e=>s(t,h,a,e).json(),$get:e=>s(t,h,a,e).json().then(r=>r.body),$path:e=>`${t}${h}${e&&e.query?`?${b(e.query)}`:""}`},get:e=>s(t,i,a,e).json(),$get:e=>s(t,i,a,e).json().then(r=>r.body),$path:()=>`${t}${i}`},p:{_code:e=>{const r=`${f}/${e}`;return{get:o=>s(t,r,a,o).json(),$get:o=>s(t,r,a,o).json().then(v=>v.body),$path:o=>`${t}${r}${o&&o.query?`?${b(o.query)}`:""}`}},search:{get:e=>s(t,q,a,e).json(),$get:e=>s(t,q,a,e).json().then(r=>r.body),$path:e=>`${t}${q}${e&&e.query?`?${b(e.query)}`:""}`},get:e=>s(t,f,a,e).json(),$get:e=>s(t,f,a,e).json().then(r=>r.body),$path:()=>`${t}${f}`},version:{get:e=>s(t,l,a,e).json(),$get:e=>s(t,l,a,e).json().then(r=>r.body),$path:()=>`${t}${l}`},w:{_code:e=>{const r=`${C}/${e}`;return{get:o=>s(t,r,a,o).json(),$get:o=>s(t,r,a,o).json().then(v=>v.body),$path:()=>`${t}${r}`}},search:{get:e=>s(t,g,a,e).json(),$get:e=>s(t,g,a,e).json().then(r=>r.body),$path:e=>`${t}${g}${e&&e.query?`?${b(e.query)}`:""}`},get:e=>s(t,C,a,e).json(),$get:e=>s(t,C,a,e).json().then(r=>r.body),$path:()=>`${t}${C}`},get:e=>s(t,d,a,e).json(),$get:e=>s(t,d,a,e).json().then(r=>r.body),$path:e=>`${t}${d}${e&&e.query?`?${b(e.query)}`:""}`}}},P=()=>{const s=F.create({baseURL:"https://provinces.open-api.vn"});return te(H(s))},se=M("address",{state:()=>({provinceCode:"",districtCode:"",wardCode:"",provinceList:[],DistrictList:[],WardList:[]}),getters:{},actions:{resetLocation(){this.districtCode="",this.wardCode="",this.DistrictList=[],this.WardList=[]},async GetProvince(){const s=await P().api.p.$get();this.provinceList=s},async GetDistrict(){const s=await P().api.p._code(Number(this.provinceCode)).$get({query:{depth:2}});this.DistrictList=s.districts??[],console.log("a")},async GetWard(){const s=await P().api.d._code(Number(this.districtCode)).$get({query:{depth:2}});this.WardList=s.wards??[],console.log("b")}}}),re=M("category",{state:()=>({parentId:"",childId:"",chooseCategoryId:"",ParentCategoryList:[],ChildCategoryList:[]}),getters:{},actions:{ResetCategory(){this.parentId="",this.childId="",this.chooseCategoryId="",this.ParentCategoryList=[],this.ChildCategoryList=[]},async GetParentCategory(){var t;const s=await I().api.v1.SelectCategories.$get();if(s.success)return this.ParentCategoryList=((t=s.response)==null?void 0:t.filter(d=>d.parentId===null).map(d=>({name:d.categoryName||"",code:d.categoryId||""})))??[]},async GetChildCategory(){const s=await I().api.v1.SelectSubCategories.$get({query:{ParentCategoryId:this.parentId}});if(s.success&&s.response)return this.ChildCategoryList=s.response.map(t=>({name:t.categoryName||"",code:t.categoryId||""}))},async CheckCategory(){const n=I(),s=U(),t=await n.api.v1.SelectSubCategories.$get({query:{ParentCategoryId:this.parentId}});return!t.success&&t.messageId==="E10000"?(s.SetFormMessageNotApiRes("E10000",!0,t.message??""),!1):t.response&&this.childId===""?(s.SetFormMessageNotApiRes("E0000",!0,"Please choose child category"),!1):!t.response&&!t.success?(this.chooseCategoryId=this.parentId,!0):(this.chooseCategoryId=this.childId,!0)}}}),ae={class:"relative"},oe={key:0,class:"absolute w-full bg-white text-black border border-gray-300 rounded-lg shadow-lg z-10 max-h-48 overflow-y-auto list-none dark:text-white dark:bg-slate-900"},ne={key:0},ie=["onClick"],de={key:1},le=["onClick"],ce=V({__name:"DropDownSearch",props:{textModel:{type:String,required:!1,default:""},xmlColumn:{type:Object,required:!0},masterName:{type:String,required:!0},errMsg:{type:String,required:!0,default:""},move:{type:Boolean,required:!1,default:!0},disabled:{type:Boolean,required:!0},maxlength:{type:Number,required:!0},placeholder:{type:String,required:!1,default:""},classField:{type:String,default:S.INPUT},isShowError:{type:Boolean,required:!1,default:!0},readonly:{type:Boolean,required:!1,default:!1},type:{type:String,required:!1,default:"text"},options:{type:Object,required:!0,default:[]},isCategory:{type:Boolean,required:!1,default:!1}},emits:["on-blur","on-change","on-input"],setup(n,{expose:s,emit:t}){const d=x(!1),i=n,h=t,f=X.v4(),q=j(()=>i.xmlColumn.rules),l=x(i.textModel),C=x(i.errMsg),g=se(),a=re(),e=j(()=>l.value?i.options.filter(c=>c.name.toLowerCase().includes(l.value.toLowerCase())):i.options),r=(c,p)=>{w(c),i.masterName===L.Province&&(g.provinceCode=p,g.GetDistrict()),i.masterName===L.District&&(g.districtCode=p,g.GetWard()),i.masterName===L.Ward&&(g.wardCode=p),d.value=!1},o=(c,p)=>{w(c),i.masterName===_.ParentCategory&&(a.parentId=p,a.GetChildCategory()),i.masterName===_.ChildCategory&&(a.childId=p),d.value=!1},v=()=>{C.value=i.errMsg,l.value===null&&(l.value=""),l.value=l.value.slice(0,i.maxlength),A(()=>{h("on-blur")})},E=()=>{A(()=>{h("on-input")})},w=c=>{l.value=c},G=j(()=>C.value?S.INPUT_ERROR:S.INPUT),R=()=>{A(()=>{h("on-change")})};return window.addEventListener("click",c=>{c.target&&!c.target.closest(".relative")&&(d.value=!1)}),W(()=>{window.removeEventListener("click",c=>{c.target&&!c.target.closest(".relative")&&(d.value=!1)})}),O(()=>{}),s({setModel:w}),(c,p)=>(m(),$("div",ae,[N(Z,{"xml-column":n.xmlColumn},null,8,["xml-column"]),z("div",null,[N(y(Q),{id:y(f),modelValue:y(l),"onUpdate:modelValue":p[0]||(p[0]=u=>K(l)?l.value=u:null),type:n.type,class:Y(y(G)),"data-enter-move":n.move,name:n.xmlColumn.id,rules:y(q),onfocus:"select()",disabled:n.disabled,readonly:n.readonly,onFocus:p[1]||(p[1]=u=>d.value=!0),placeholder:i.placeholder,onBlur:v,autocomplete:"off","aria-autocomplete":"none",onChange:R,onInput:E},null,8,["id","modelValue","type","class","data-enter-move","name","rules","disabled","readonly","placeholder"])]),y(d)&&y(e).length?(m(),$("ul",oe,[n.isCategory?(m(),$("div",ne,[(m(!0),$(k,null,T(y(e),u=>(m(),$("li",{key:u.value,class:"p-2 hover:bg-blue-100 cursor-pointer",onClick:B=>o(u.name,u.code)},D(u.name),9,ie))),128))])):(m(),$("div",de,[(m(!0),$(k,null,T(y(e),u=>(m(),$("li",{key:u.value,class:"p-2 hover:bg-blue-100 cursor-pointer",onClick:B=>r(u.name,u.code)},D(u.name),9,le))),128))]))])):J("",!0)]))}}),me=ee(ce,[["__scopeId","data-v-1810fde5"]]);export{me as D,re as a,se as u};
