import{V as I}from"./Bug8ffv2.js";import{e as A,l as n,D as B,o as s,c as i,a as t,h as D,i as V,t as b,j}from"./DFVm4NPh.js";const L={class:"max-w-6xl mx-auto p-5"},N={key:0,class:"space-y-5"},E={class:"flex flex-col md:flex-row gap-5"},F={class:"flex-1"},H={class:"flex-1 flex flex-col items-center justify-center border border-gray-300 p-2 shadow-lg"},S={class:"text-lg font-semibold mb-2"},U={key:0},X=["src"],q={key:1,class:"text-gray-500"},z={class:"flex justify-between mt-5"},G=["disabled"],J=["disabled"],P=A({__name:"mode",setup(K){const o=n([]),a=n(0),u=n(1),e=n(null),d=B(()=>o.value[a.value]||{original:""}),h=l=>{const r=l.target;if(r.files&&r.files.length){o.value=[];const p=Array.from(r.files);let v=0;p.forEach(R=>{const g=new FileReader;g.onload=c=>{c.target&&typeof c.target.result=="string"&&(console.log("result",c.target.result),o.value.push({original:c.target.result,cropped:""}),v++,v===p.length&&(a.value=0))},g.readAsDataURL(R)})}},f=()=>{if(e.value&&e.value.getCroppedCanvas){const l=e.value.getCroppedCanvas();l&&(o.value[a.value].cropped=l.toDataURL("image/png"))}},m=()=>{u.value=1,e.value&&e.value.setAspectRatio&&e.value.setAspectRatio(1)},x=()=>{u.value=16/9,e.value&&e.value.setAspectRatio&&e.value.setAspectRatio(16/9)},_=()=>{e.value&&e.value.rotate&&e.value.rotate(-90)},y=()=>{e.value&&e.value.rotate&&e.value.rotate(90)},w=()=>{e.value&&e.value.reset&&e.value.reset()},C=()=>{a.value<o.value.length-1&&a.value++},k=()=>{a.value>0&&a.value--};return(l,r)=>(s(),i("div",L,[t("input",{type:"file",onChange:h,accept:"image/*",multiple:"",class:"mb-5 block"},null,32),o.value.length?(s(),i("div",N,[t("div",E,[t("div",F,[t("div",{class:"flex flex-wrap gap-2 mb-3"},[t("button",{onClick:m,class:"px-3 py-2 bg-blue-500 text-white rounded hover:bg-blue-600"},"Hình vuông"),t("button",{onClick:x,class:"px-3 py-2 bg-blue-500 text-white rounded hover:bg-blue-600"},"Hình chữ nhật"),t("button",{onClick:_,class:"px-3 py-2 bg-blue-500 text-white rounded hover:bg-blue-600"},"Xoay trái"),t("button",{onClick:y,class:"px-3 py-2 bg-blue-500 text-white rounded hover:bg-blue-600"},"Xoay phải"),t("button",{onClick:w,class:"px-3 py-2 bg-red-500 text-white rounded hover:bg-red-600"},"Reset")]),(s(),D(V(I),{ref_key:"cropper",ref:e,src:d.value.original,"aspect-ratio":u.value,"auto-crop-area":1,"view-mode":1,"drag-mode":"move",preview:".preview",class:"w-full h-[26rem] bg-gray-100",key:a.value},null,8,["src","aspect-ratio"])),t("button",{onClick:f,class:"mt-3 px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600"},"Crop Image")]),t("div",H,[t("h3",S,"Ảnh đã cắt ("+b(a.value+1)+" / "+b(o.value.length)+")",1),d.value.cropped?(s(),i("div",U,[t("img",{src:d.value.cropped,alt:"Cropped Image",class:"w-full"},null,8,X)])):(s(),i("div",q,"Chưa có ảnh đã cắt."))])]),t("div",z,[t("button",{onClick:k,disabled:a.value===0,class:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed"}," Back ",8,G),t("button",{onClick:C,disabled:a.value===o.value.length-1,class:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed"}," Next ",8,J)])])):j("",!0)]))}});export{P as default};
