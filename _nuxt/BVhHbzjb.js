import{_ as C}from"./BBMHhU8h.js";import{_ as S}from"./D8p04lkY.js";import{_ as F}from"./C2uPH1VK.js";import{u as f}from"./CMS-NkLX.js";import{u as I}from"./BRKTF25G.js";import{q as N,Y as P,y as A,z as V,e as L,l as D,o as i,h as U,w as u,a as t,i as s,c as l,b as x,F as z,r as B,n as h,t as a,dh as O,di as T}from"./DFVm4NPh.js";import{f as $}from"./Cgecvcl9.js";import"./Dw6ZVRj5.js";import"./BDEeDIwr.js";import"./B1VAvD7b.js";import"./5Q-RKaCz.js";import"./DgmwlLno.js";import"./DqbQgBaR.js";import"./BpXJ3t4k.js";import"./B05HPIib.js";import"./D5y8FroI.js";import"./BuMp5kCj.js";import"./QbBb9rFs.js";import"./DlAUqK2U.js";import"./Bj-PnIja.js";import"./awSMyq0J.js";import"./B_7wH41M.js";import"./Sc8BXWmR.js";/* empty css        */const b={quantity:"1"},j={...b},q={values:b,errors:j,...V},E=N("Payment",{state:()=>({fields:q,address:{},paymentUrl:""}),getters:{fieldValues:n=>n.fields.values,fieldErrors:n=>n.fields.errors},actions:{SetFields(n){this.fields=n},ResetStore(){this.fields.resetForm()},async InsertOrder(){var m;const n=P(),o=f();A();const c=o.cartList.map(y=>({accessoryId:y.accessoryId??"",quantity:Number(y.quantity)})),e=await n.api.v1.InsertOrder.$post({body:{addressId:this.address.addressId,paymentMethod:1,orderDetails:c}});return e.success?(this.paymentUrl=((m=e.response)==null?void 0:m.paymentUrl)??"",!0):!1}}}),G={class:"w-full max-w-4xl mx-auto flex items-center px-4 py-3 shadow-md border-b bg-white dark:bg-gray-900 text-black dark:text-white"},M={key:0,class:"text-lg font-semibold flex-1 text-center"},R={key:1,class:"text-lg font-semibold flex-1 text-center"},Y={key:0,class:"min-h-screen w-full flex flex-col items-center bg-white dark:bg-gray-900 text-black dark:text-white px-4 pt-6 pb-6"},H={class:"max-w-4xl w-full h-[850px] bg-gray-100 dark:bg-gray-800 p-6 rounded-lg shadow-lg overflow-y-auto space-y-4"},J={class:"flex-1"},K={class:"text-gray-700 dark:text-gray-300 font-bold text-xl"},Q={class:"text-gray-700 dark:text-gray-300"},W={class:"text-gray-700 dark:text-gray-300"},X={class:"text-gray-700 dark:text-gray-300"},Z=["onClick"],tt={key:0,class:h(["flex items-center justify-between p-4 bg-white dark:bg-gray-700 rounded-lg shadow"])},et={class:"flex-1"},st={class:"text-gray-700 dark:text-gray-300 font-bold text-xl"},rt={class:"text-gray-700 dark:text-gray-300"},at={class:"text-gray-700 dark:text-gray-300"},ot={class:"text-gray-700 dark:text-gray-300"},it={key:1},nt={key:1,class:"min-h-screen w-full flex flex-col items-center bg-white dark:bg-gray-900 text-black dark:text-white px-4 pt-6 pb-6"},lt={class:"max-w-4xl w-full h-[850px] bg-gray-100 dark:bg-gray-800 p-6 rounded-lg shadow-lg overflow-y-auto"},dt={class:"max-w-4xl w-full mt-12 flex items-center justify-between p-4 rounded-lg bg-gray-100 dark:bg-gray-700 text-black dark:text-white"},ct={class:"font-semibold"},Ot=L({__name:"index",setup(n){const o=f(),c=I(),e=E();D(null);const m=d=>{if(d)return $(d,T.VND,O.VI_VN)},y=d=>{e.address=d,console.log("Địa chỉ được chọn:",e.address)},_=async()=>{await e.InsertOrder()&&(window.location.href=e.paymentUrl)},w=async()=>{o.isPaymentFlag=!0,await c.GetAddress()},k=()=>{if(o.isPaymentFlag){o.isPaymentFlag=!1;return}window.history.back()};return(d,mt)=>(i(),U(F,null,{body:u(()=>{var p,g;return[t("div",G,[t("button",{onClick:k,class:"text-xl mr-3"},"←"),s(o).isPaymentFlag?(i(),l("h2",M,"Thông tin và Thanh toán")):(i(),l("h2",R,"Giỏ hàng của bạn"))]),s(o).isPaymentFlag?(i(),l("div",Y,[x(S,{header:"Add Address","button-icon":"pi pi-plus","button-label":"Add your address","button-severity":"contrast","confirm-label":"Ok",width:"40rem"},{body:u(()=>[t("div",H,[(i(!0),l(z,null,B(s(c).uUDSSelectUserAddressEntity??[],(r,v)=>(i(),l("div",{key:v,class:h(["flex items-center justify-between p-4 bg-white dark:bg-gray-700 rounded-lg shadow",s(e).address===r?"border-2 border-blue-500":""])},[t("div",J,[t("div",K,a(((r==null?void 0:r.firstName)??"")+" "+((r==null?void 0:r.lastName)??"")),1),t("p",Q,a(r.addressLine),1),t("p",W,a(r.ward),1),t("p",X,a(r.city)+", "+a(r.province)+" "+a(r.district),1)]),t("div",null,[t("button",{class:"bg-blue-500 text-white px-4 py-2 rounded",onClick:yt=>y(r)},"Chọn",8,Z)])],2))),128))])]),_:1}),s(e).address?(i(),l("div",tt,[t("div",et,[t("div",st,a((((p=s(e).address)==null?void 0:p.firstName)??"")+" "+(((g=s(e).address)==null?void 0:g.lastName)??"")),1),t("p",rt,a(s(e).address.addressLine),1),t("p",at,a(s(e).address.ward),1),t("p",ot,a(s(e).address.city)+", "+a(s(e).address.province)+" "+a(s(e).address.district),1)])])):(i(),l("div",it)),t("div",{class:"max-w-4xl w-full mt-12 flex items-center justify-between p-4 rounded-lg bg-gray-100 dark:bg-gray-700 text-black dark:text-white"},[t("button",{class:"bg-blue-500 px-6 py-3 rounded-lg font-semibold",onClick:_},"Thanh toán")])])):(i(),l("div",nt,[t("div",lt,[x(C,{"cart-model":s(o).cartList},null,8,["cart-model"])]),t("div",dt,[t("p",ct,"Tổng: "+a(m(Number(s(o).totalCartPrice)))+" VND",1),t("button",{class:"bg-blue-500 px-6 py-3 rounded-lg font-semibold",onClick:w},"Thanh toán")])]))]}),_:1}))}});export{Ot as default};
