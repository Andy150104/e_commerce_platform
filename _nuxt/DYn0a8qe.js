import{e as F,x as O,J as T,l as s,s as V,f as $,m as S,af as N,g as M,K as A,o as C,h as g,w as u,E as z,L as D,a,b as r,i as n,j as G,n as H,A as U}from"./DFVm4NPh.js";import{_ as j,C as X}from"./DGXY1j6i.js";import Y from"./Ck2GeduC.js";import{a as q,u as I}from"./BTS8cxVB.js";import{_ as J}from"./C2uPH1VK.js";import K from"./Rv5UuXQF.js";import{i as m}from"./B1VAvD7b.js";import{_ as W,a as Q,b as Z}from"./CUPvsEwL.js";import{u as ee}from"./LYaAcBEI.js";import{u as oe}from"./CMS-NkLX.js";import{X as te}from"./BDEeDIwr.js";import"./Cgecvcl9.js";import"./DlAUqK2U.js";import"./QbBb9rFs.js";import"./Bj-PnIja.js";import"./BpXJ3t4k.js";import"./B05HPIib.js";import"./D5y8FroI.js";import"./awSMyq0J.js";import"./B_7wH41M.js";import"./Sc8BXWmR.js";import"./BuMp5kCj.js";/* empty css        */import"./5Q-RKaCz.js";import"./DgmwlLno.js";const se={class:"mb-16 mx-auto max-w-[1600px] 3xl:max-w-[2000px]"},ae={class:"flex justify-end gap-2 mb-4"},re={class:"text-center mt-8"},Te=F({__name:"index",setup(ne){const e=q(),i=I();oe(),ee(),O();const v=T(),B=s(),d=s(),f=s(),w=s(!0),{fieldValues:p,fieldErrors:ie}=V(e),b=$({initialValues:p.value});e.SetFields(b);const k=S(),L={sortBy:te({id:"sortBy",name:"sortBy",rules:"",visible:!0,option:""})},h=s(5),l=s(null),c=async()=>{await e.GetProductList(z.BlindBox,0,0,e.fieldValues.sortBy,h.value,i.searchParams),await D()},P=()=>{window.location.href="http://localhost:3000/Login"},E=async o=>{if(v.isAuthorization){S().push(`/Service/Exchange/BlindBox/${o}`);return}d.value.closePopup(!0)},R=()=>{i.searchParams=f.value.onGetSearch(),k.push({path:"/Service/Exchange",query:{search:i.searchParams}})};N(()=>e.fieldValues.sortBy,async(o,t)=>{o!==t&&(e.produtList=[],e.fields.setFieldValue("sortBy",o),await c(),m())});const _=async()=>{h.value+=5,await c(),m()},x=()=>{if(!l.value)return;const{scrollTop:o,clientHeight:t,scrollHeight:y}=l.value;console.log({scrollTop:o,clientHeight:t,scrollHeight:y}),o+t>=y-10&&_()};return M(async()=>{await c(),m(),w.value=!1}),A(()=>{e.$reset()}),(o,t)=>(C(),g(J,{onOnScrollLoad:x},{body:u(()=>[a("div",{ref_key:"scrollContainer",ref:l,onScrollPassive:x},[r(W,{ref_key:"isShowPopupRef",ref:d,"button-cancel-name":"Cancel","button-o-k-name":"Yes, Move to Login!!!",message:"You must to login to countinue to buy",onOnClick:P},null,512),r(K,null,{search:u(()=>[r(Q,{ref_key:"searchOneFieldRef",ref:f,onOnClickSearch:R},null,512)]),_:1}),a("div",se,[t[0]||(t[0]=a("h2",{class:"text-2xl font-bold text-center text-gray-900 mb-8 dark:text-white"},"Exchange Products",-1)),a("div",ae,[r(Z,{"xml-column":L.sortBy,model:n(p).sortBy,disabled:!1,"master-name":"SortBy"},null,8,["xml-column","model"])]),r(Y,null,{body:u(()=>[r(j,{ref_key:"cardRef",ref:B,"is-show-wish-list":!1,"is-exchange":!0,"product-model":n(e).produtList,"label-name":"Exchange now",onOnBuy:E,"is-have-side-bar":!0},null,8,["product-model"]),n(e).isLoadingSkeletonCard?(C(),g(X,{key:0})):G("",!0)]),_:1}),a("div",re,[a("button",{class:H(n(U).BUTTON_DEFAULT_WHITE),onClick:_},"Explore More",2)])])],544)]),_:1}))}});export{Te as default};
