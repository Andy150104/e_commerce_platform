import{e as V,l as w,D as $,ct as ue,d8 as W,bX as B,F as X,g as J,K as re,c5 as Q,dn as fe,dp as me,dq as oe,U as q,o as le,h as be,w as G,b as R,O as ne,a as Pe,c as ge,n as U,P as Se,an as ye,j as he}from"./DFVm4NPh.js";import{u as we}from"./B3m6dROT.js";import{_ as $e}from"./DlAUqK2U.js";import{q as Ee,N as ke,E as Fe,n as se,d as C}from"./BSf_PoaV.js";import{o as n,u as H,A as Y,i as j,N as ae,a as T}from"./DRmxXga8.js";import{w as Oe}from"./q00Ry1bX.js";import{s as Ce}from"./BHeKWSUs.js";import{f as _,u as x}from"./DfbMX9JH.js";import{t as Ie,i as K,l as Be}from"./22etpbUe.js";import{i as Z,E as ee,w as Te,h as Me,P as M,N as I,T as z}from"./DxdRxZrz.js";import"./5Q-RKaCz.js";import"./Ds-y25X3.js";import"./CAb_97xm.js";import"./adkIYQe8.js";import"./B33bflHF.js";import"./DxTMCm_i.js";import"./Sprb8a3n.js";import"./BpMd8du9.js";import"./BpbWEv0s.js";import"./-mdl1zzC.js";var Ne=(l=>(l[l.Open=0]="Open",l[l.Closed=1]="Closed",l))(Ne||{});let ie=Symbol("PopoverContext");function te(l){let b=Q(ie,null);if(b===null){let P=new Error(`<${l} /> is missing a parent <${de.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(P,te),P}return b}let De=Symbol("PopoverGroupContext");function pe(){return Q(De,null)}let ve=Symbol("PopoverPanelContext");function He(){return Q(ve,null)}let de=V({name:"Popover",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"}},setup(l,{slots:b,attrs:P,expose:F}){var h;let S=w(null);F({el:S,$el:S});let o=w(1),e=w(null),m=w(null),s=w(null),d=w(null),c=$(()=>Z(S)),g=$(()=>{var t,u;if(!n(e)||!n(d))return!1;for(let A of document.querySelectorAll("body > *"))if(Number(A==null?void 0:A.contains(n(e)))^Number(A==null?void 0:A.contains(n(d))))return!0;let a=ee(),f=a.indexOf(n(e)),k=(f+a.length-1)%a.length,O=(f+1)%a.length,L=a[k],ce=a[O];return!((t=n(d))!=null&&t.contains(L))&&!((u=n(d))!=null&&u.contains(ce))}),v={popoverState:o,buttonId:w(null),panelId:w(null),panel:d,button:e,isPortalled:g,beforePanelSentinel:m,afterPanelSentinel:s,togglePopover(){o.value=H(o.value,{0:1,1:0})},closePopover(){o.value!==1&&(o.value=1)},close(t){v.closePopover();let u=t?t instanceof HTMLElement?t:t.value instanceof HTMLElement?n(t):n(v.button):n(v.button);u==null||u.focus()}};ue(ie,v),Ie($(()=>H(o.value,{0:K.Open,1:K.Closed})));let E={buttonId:v.buttonId,panelId:v.panelId,close(){v.closePopover()}},y=pe(),N=y==null?void 0:y.registerPopover,[D,i]=Ee(),p=ke({mainTreeNodeRef:y==null?void 0:y.mainTreeNodeRef,portals:D,defaultContainers:[e,d]});function r(){var t,u,a,f;return(f=y==null?void 0:y.isFocusWithinPopoverGroup())!=null?f:((t=c.value)==null?void 0:t.activeElement)&&(((u=n(e))==null?void 0:u.contains(c.value.activeElement))||((a=n(d))==null?void 0:a.contains(c.value.activeElement)))}return W(()=>N==null?void 0:N(E)),Fe((h=c.value)==null?void 0:h.defaultView,"focus",t=>{var u,a;t.target!==window&&t.target instanceof HTMLElement&&o.value===0&&(r()||e&&d&&(p.contains(t.target)||(u=n(v.beforePanelSentinel))!=null&&u.contains(t.target)||(a=n(v.afterPanelSentinel))!=null&&a.contains(t.target)||v.closePopover()))},!0),Oe(p.resolveContainers,(t,u)=>{var a;v.closePopover(),Te(u,Me.Loose)||(t.preventDefault(),(a=n(e))==null||a.focus())},$(()=>o.value===0)),()=>{let t={open:o.value===0,close:v.close};return B(X,[B(i,{},()=>Y({theirProps:{...l,...P},ourProps:{ref:S},slot:t,slots:b,attrs:P,name:"Popover"})),B(p.MainTreeNode)])}}}),je=V({name:"PopoverButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},inheritAttrs:!1,setup(l,{attrs:b,slots:P,expose:F}){var h;let S=(h=l.id)!=null?h:`headlessui-popover-button-${j()}`,o=te("PopoverButton"),e=$(()=>Z(o.button));F({el:o.button,$el:o.button}),J(()=>{o.buttonId.value=S}),re(()=>{o.buttonId.value=null});let m=pe(),s=m==null?void 0:m.closeOthers,d=He(),c=$(()=>d===null?!1:d.value===o.panelId.value),g=w(null),v=`headlessui-focus-sentinel-${j()}`;c.value||W(()=>{o.button.value=n(g)});let E=Ce($(()=>({as:l.as,type:b.type})),g);function y(t){var u,a,f,k,O;if(c.value){if(o.popoverState.value===1)return;switch(t.key){case T.Space:case T.Enter:t.preventDefault(),(a=(u=t.target).click)==null||a.call(u),o.closePopover(),(f=n(o.button))==null||f.focus();break}}else switch(t.key){case T.Space:case T.Enter:t.preventDefault(),t.stopPropagation(),o.popoverState.value===1&&(s==null||s(o.buttonId.value)),o.togglePopover();break;case T.Escape:if(o.popoverState.value!==0)return s==null?void 0:s(o.buttonId.value);if(!n(o.button)||(k=e.value)!=null&&k.activeElement&&!((O=n(o.button))!=null&&O.contains(e.value.activeElement)))return;t.preventDefault(),t.stopPropagation(),o.closePopover();break}}function N(t){c.value||t.key===T.Space&&t.preventDefault()}function D(t){var u,a;l.disabled||(c.value?(o.closePopover(),(u=n(o.button))==null||u.focus()):(t.preventDefault(),t.stopPropagation(),o.popoverState.value===1&&(s==null||s(o.buttonId.value)),o.togglePopover(),(a=n(o.button))==null||a.focus()))}function i(t){t.preventDefault(),t.stopPropagation()}let p=se();function r(){let t=n(o.panel);if(!t)return;function u(){H(p.value,{[C.Forwards]:()=>M(t,I.First),[C.Backwards]:()=>M(t,I.Last)})===z.Error&&M(ee().filter(a=>a.dataset.headlessuiFocusGuard!=="true"),H(p.value,{[C.Forwards]:I.Next,[C.Backwards]:I.Previous}),{relativeTo:n(o.button)})}u()}return()=>{let t=o.popoverState.value===0,u={open:t},{...a}=l,f=c.value?{ref:g,type:E.value,onKeydown:y,onClick:D}:{ref:g,id:S,type:E.value,"aria-expanded":o.popoverState.value===0,"aria-controls":n(o.panel)?o.panelId.value:void 0,disabled:l.disabled?!0:void 0,onKeydown:y,onKeyup:N,onClick:D,onMousedown:i};return B(X,[Y({ourProps:f,theirProps:{...b,...a},slot:u,attrs:b,slots:P,name:"PopoverButton"}),t&&!c.value&&o.isPortalled.value&&B(_,{id:v,features:x.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:r})])}}}),Le=V({name:"PopoverPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},focus:{type:Boolean,default:!1},id:{type:String,default:null}},inheritAttrs:!1,setup(l,{attrs:b,slots:P,expose:F}){var h;let S=(h=l.id)!=null?h:`headlessui-popover-panel-${j()}`,{focus:o}=l,e=te("PopoverPanel"),m=$(()=>Z(e.panel)),s=`headlessui-focus-sentinel-before-${j()}`,d=`headlessui-focus-sentinel-after-${j()}`;F({el:e.panel,$el:e.panel}),J(()=>{e.panelId.value=S}),re(()=>{e.panelId.value=null}),ue(ve,e.panelId),W(()=>{var i,p;if(!o||e.popoverState.value!==0||!e.panel)return;let r=(i=m.value)==null?void 0:i.activeElement;(p=n(e.panel))!=null&&p.contains(r)||M(n(e.panel),I.First)});let c=Be(),g=$(()=>c!==null?(c.value&K.Open)===K.Open:e.popoverState.value===0);function v(i){var p,r;switch(i.key){case T.Escape:if(e.popoverState.value!==0||!n(e.panel)||m.value&&!((p=n(e.panel))!=null&&p.contains(m.value.activeElement)))return;i.preventDefault(),i.stopPropagation(),e.closePopover(),(r=n(e.button))==null||r.focus();break}}function E(i){var p,r,t,u,a;let f=i.relatedTarget;f&&n(e.panel)&&((p=n(e.panel))!=null&&p.contains(f)||(e.closePopover(),((t=(r=n(e.beforePanelSentinel))==null?void 0:r.contains)!=null&&t.call(r,f)||(a=(u=n(e.afterPanelSentinel))==null?void 0:u.contains)!=null&&a.call(u,f))&&f.focus({preventScroll:!0})))}let y=se();function N(){let i=n(e.panel);if(!i)return;function p(){H(y.value,{[C.Forwards]:()=>{var r;M(i,I.First)===z.Error&&((r=n(e.afterPanelSentinel))==null||r.focus())},[C.Backwards]:()=>{var r;(r=n(e.button))==null||r.focus({preventScroll:!0})}})}p()}function D(){let i=n(e.panel);if(!i)return;function p(){H(y.value,{[C.Forwards]:()=>{let r=n(e.button),t=n(e.panel);if(!r)return;let u=ee(),a=u.indexOf(r),f=u.slice(0,a+1),k=[...u.slice(a+1),...f];for(let O of k.slice())if(O.dataset.headlessuiFocusGuard==="true"||t!=null&&t.contains(O)){let L=k.indexOf(O);L!==-1&&k.splice(L,1)}M(k,I.First,{sorted:!1})},[C.Backwards]:()=>{var r;M(i,I.Previous)===z.Error&&((r=n(e.button))==null||r.focus())}})}p()}return()=>{let i={open:e.popoverState.value===0,close:e.close},{focus:p,...r}=l,t={ref:e.panel,id:S,onKeydown:v,onFocusout:o&&e.popoverState.value===0?E:void 0,tabIndex:-1};return Y({ourProps:t,theirProps:{...b,...r},attrs:b,slot:i,slots:{...P,default:(...u)=>{var a;return[B(X,[g.value&&e.isPortalled.value&&B(_,{id:s,ref:e.beforePanelSentinel,features:x.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:N}),(a=P.default)==null?void 0:a.call(P,...u),g.value&&e.isPortalled.value&&B(_,{id:d,ref:e.afterPanelSentinel,features:x.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:D})])]}},features:ae.RenderStrategy|ae.Static,visible:g.value,name:"PopoverPanel"})}}});const Ae=V({components:{HPopover:de,HPopoverButton:je,HPopoverPanel:Le},props:{mode:{type:String,default:"click",validator:l=>["click","hover"].includes(l)},disabled:{type:Boolean,default:!1},openDelay:{type:Number,default:50},closeDelay:{type:Number,default:0},popper:{type:Object,default:()=>({})},ui:{type:Object,default:()=>fe.ui.popover}},setup(l){const b=me(),P=$(()=>oe({},l.ui,b.ui.popover)),F=$(()=>oe({},l.popper,P.value.popper)),[h,S]=we(F.value),o=w(null),e=w(null);let m=null,s=null;J(()=>{var E;const g=(E=o.value)==null?void 0:E.$.provides;if(!g)return;const v=Object.getOwnPropertySymbols(g);e.value=v.length&&g[v[0]]});function d(){l.mode!=="hover"||!e.value||(s&&(clearTimeout(s),s=null),e.value.popoverState!==0&&(m=m||setTimeout(()=>{e.value.togglePopover&&e.value.togglePopover(),m=null},l.openDelay)))}function c(){l.mode!=="hover"||!e.value||(m&&(clearTimeout(m),m=null),e.value.popoverState!==1&&(s=s||setTimeout(()=>{e.value.closePopover&&e.value.closePopover(),s=null},l.closeDelay)))}return{ui:P,popover:o,trigger:h,container:S,onMouseOver:d,onMouseLeave:c}}}),Ge=["disabled"];function Ke(l,b,P,F,h,S){const o=q("HPopoverButton"),e=q("HPopoverPanel"),m=q("HPopover");return le(),be(m,{ref:"popover",class:U(l.ui.wrapper),onMouseleave:l.onMouseLeave},{default:G(({open:s,close:d})=>[R(o,{ref:"trigger",as:"div",disabled:l.disabled,class:"inline-flex w-full",role:"button",onMouseover:l.onMouseOver},{default:G(()=>[ne(l.$slots,"default",{open:s,close:d},()=>[Pe("button",{disabled:l.disabled}," Open ",8,Ge)])]),_:2},1032,["disabled","onMouseover"]),s?(le(),ge("div",{key:0,ref:"container",class:U([l.ui.container,l.ui.width]),onMouseover:b[0]||(b[0]=(...c)=>l.onMouseOver&&l.onMouseOver(...c))},[R(ye,Se({appear:""},l.ui.transition),{default:G(()=>[R(e,{class:U([l.ui.base,l.ui.background,l.ui.ring,l.ui.rounded,l.ui.shadow]),static:""},{default:G(()=>[ne(l.$slots,"panel",{open:s,close:d})]),_:2},1032,["class"])]),_:2},1040)],34)):he("",!0)]),_:3},8,["class","onMouseleave"])}const rt=$e(Ae,[["render",Ke]]);export{rt as default};
