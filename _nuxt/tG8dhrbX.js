import b from"./3OUur2A8.js";import{u as C,_ as F}from"./BbryYVfn.js";import{p as L,q as B,y as T,C as N,v as A,x as E,z as I,e as M,B as z,l as g,s as R,f as U,S as x,g as j,o as m,h as q,w as O,a as e,b as l,i,c as y,n as w,A as v,d as $}from"./DFVm4NPh.js";import{X as h}from"./BDEeDIwr.js";import{_}from"./Bzy3NznM.js";import{_ as S}from"./h9XeG6ng.js";import"./Bj-PnIja.js";import"./BpXJ3t4k.js";import"./B05HPIib.js";import"./D5y8FroI.js";import"./QbBb9rFs.js";import"./DlAUqK2U.js";import"./V8n92ecy.js";import"./DPxmNygB.js";import"./DsIA2G5F.js";import"./BKCMpDB6.js";import"./PLEq0hNF.js";import"./0qAV6zC5.js";import"./B33bflHF.js";import"./DxTMCm_i.js";import"./DgmwlLno.js";const f={password:"",confirmPassword:"",key:""},D=L(f),G={values:f,errors:D,...I},K=B("VerifyPass",{state:()=>({fields:G,createFlgVerifyPass:!1}),getters:{fieldValues:s=>s.fields.values,fieldValid:s=>s.fields.meta.valid,fieldErrors:s=>s.fields.errors},actions:{ResetStore(){this.fields.resetForm()},SetFields(s){this.fields=s},async Validate(){return await this.fields.validate(),this.fieldValid},async verifyPassword(){const s=T();if(s.LoadingChange(!0),(await this.fields.validate()).valid===!1)return!1;const a=N(this.fields.values,f),t=A(),n=E(),o=await t.api.v1.FPSVerifyKey.$post({body:{isOnlyValidation:!1,key:a.key,newPassWord:a.password}});return s.LoadingChange(!1),o.success?(n.SetFormMessage(o,!0),!0):(n.SetFormMessage(o,!0),!1)}}}),X={key:0},W={class:"py-20 mx-14 text-center"},Y={class:"flex justify-between mt-8"},H={key:1},we=M({__name:"verify",setup(s){const u=z(),a=C();g(!1);const t=K(),{fieldValues:n,fieldErrors:o}=R(t),p=U({initialValues:n.value});t.SetFields(p);const k=g([{nameItem:"Create new password",status:x.currentStep},{nameItem:"Complete",status:x.finishStep}]),d={password:h({id:"password",name:"Password",rules:"required",visible:!0,option:""}),confirmPassword:h({id:"confirmPassword",name:"Confirm Password",rules:"required|confirm_password:password",visible:!0,option:""})},P=async()=>{if(t.createFlgVerifyPass){if(!await t.verifyPassword())return;a.moveToNextStep(),t.createFlgVerifyPass=!1}},V=()=>{t.createFlgVerifyPass&&(window.location.href=document.referrer)};return j(()=>{let r=u.query.key??sessionStorage.getItem("key")??"";Array.isArray(r)&&(r=r[0]??""),r&&(sessionStorage.setItem("key",r),p.setFieldValue("key",r)),console.log("Key GOT: "+r),t.createFlgVerifyPass=!0,a.SetValues(k)}),(r,c)=>(m(),q(b,null,{body:O(()=>[e("div",null,[l(F,{items:i(a).steppList,class:"pt-14"},null,8,["items"])]),i(t).createFlgVerifyPass?(m(),y("div",X,[e("div",W,[c[0]||(c[0]=e("div",{class:"space-y-4"},[e("h2",{class:"text-2xl font-semibold"},"Reset Password"),e("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Please Enter your new password.")],-1)),e("div",null,[l(_,{"xml-column":d.password},null,8,["xml-column"]),l(S,{"xml-column":d.password,maxlength:50,disabled:!1,type:"password","err-msg":i(o).password,placeholder:"Create Password"},null,8,["xml-column","err-msg"])]),e("div",null,[l(_,{"xml-column":d.confirmPassword},null,8,["xml-column"]),l(S,{"xml-column":d.confirmPassword,maxlength:50,disabled:!1,type:"password","err-msg":i(o).confirmPassword,placeholder:"Confirm Password"},null,8,["xml-column","err-msg"])])]),e("div",Y,[e("button",{class:w(i(v).BUTTON_DEFAULT_GRAY_1),onClick:V},"Back",2),e("button",{class:w(i(v).BUTTON_DEFAULT_BLUE_2),onClick:P},"Next",2)])])):(m(),y("div",H,c[1]||(c[1]=[e("section",{class:"bg-white dark:bg-gray-900"},[e("div",{class:"py-8 px-4 mx-auto max-w-screen-xl lg:py-16 grid lg:grid-cols-2 gap-8 lg:gap-16"},[e("div",{class:"flex flex-col justify-center"},[e("h1",{class:"mb-4 text-4xl font-extrabold tracking-tight leading-none text-gray-900 md:text-5xl lg:text-6xl dark:text-white"}," Password changed successfully!!!! "),e("p",{class:"mb-8 text-lg font-normal text-gray-500 lg:text-xl dark:text-gray-400"},"Continue to login"),e("div",{class:"flex flex-col space-y-4 sm:flex-row sm:space-y-0"},[e("a",{href:"http://localhost:3000/Login",class:"inline-flex justify-center items-center py-3 px-5 text-base font-medium text-center text-white rounded-lg bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 dark:focus:ring-blue-900"},[$(" To Login "),e("svg",{class:"w-3.5 h-3.5 ms-2 rtl:rotate-180","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 10"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M1 5h12m0 0L9 1m4 4L9 9"})])])])])])],-1)])))]),_:1}))}});export{we as default};
