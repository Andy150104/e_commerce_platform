import{S as F,a as N}from"./Dw6ZVRj5.js";import{u as L}from"./CMS-NkLX.js";import{e as V,D as M,l as q,g as A,o as c,c as g,i as s,j as $,a as t,b as w,I as D,n as E,b0 as T,F as C,L as v,f as U,r as B,w as S,h as P,t as b,dh as O,di as X}from"./DFVm4NPh.js";import{X as I}from"./BDEeDIwr.js";import{h as Q}from"./B1VAvD7b.js";import{u as R}from"./DgmwlLno.js";import{f as z}from"./Cgecvcl9.js";const G=["for"],H={class:"relative flex items-center max-w-[11rem]"},J=["data-input-counter-decrement"],K=["data-input-counter-increment"],W=V({__name:"BaseControlQuantityInput",props:{textModel:{type:String,required:!1,default:""},isShowLabel:{type:Boolean,required:!1,default:!1},xmlColumn:{type:Object,required:!0},disabled:{type:Boolean,required:!0},maxlength:{type:Number,required:!0},placeholder:{type:String,required:!1,default:""},readonly:{type:Boolean,required:!1,default:!1},type:{type:String,required:!1,default:"text"}},emits:["on-blur","on-change","on-input","on-add-cart"],setup(d,{emit:_}){const m=d,i=_,o=R.v4(),y=M(()=>m.xmlColumn.rules),u=q(null),p=()=>{l(),requestAnimationFrame(()=>{const e=document.getElementById(o);l(),e==null||e.blur()})},n=q(m.textModel),h=()=>{const e=document.getElementById(o);n.value=n.value.replaceAll(n.value,e.value),n.value===null&&(n.value=""),n.value=n.value.slice(0,m.maxlength),v(()=>{i("on-blur")}),u.value&&clearTimeout(u.value),u.value=setTimeout(()=>{i("on-add-cart"),u.value=null},500)},k=()=>{v(()=>{i("on-change")})},r=e=>{v(()=>{i("on-input")})},l=()=>{const e=document.getElementById(o);e.focus(),e.select()};return A(()=>{Q()}),(e,a)=>(c(),g(C,null,[d.isShowLabel?(c(),g("label",{key:0,for:s(o),class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Choose quantity:",8,G)):$("",!0),t("div",H,[t("button",{type:"button",id:"decrement-button","data-input-counter-decrement":s(o),onClick:p,class:"bg-gray-100 dark:bg-gray-700 dark:hover:bg-gray-600 dark:border-gray-600 hover:bg-gray-200 border border-gray-300 rounded-s-lg p-3 h-11 focus:ring-gray-100 dark:focus:ring-gray-700 focus:ring-2 focus:outline-none"},a[1]||(a[1]=[t("svg",{class:"w-3 h-3 text-gray-900 dark:text-white","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18 2"},[t("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M1 1h16"})],-1)]),8,J),w(s(T),{id:s(o),modelValue:s(n),"onUpdate:modelValue":a[0]||(a[0]=f=>D(n)?n.value=f:null),type:d.type,class:E("bg-gray-50 border-x-0 border-gray-300 h-11 font-medium text-center text-gray-900 text-sm focus:ring-blue-500 focus:border-blue-500 block w-full pb-6 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"),name:d.xmlColumn.id,rules:s(y),onfocus:"select()",disabled:d.disabled,readonly:d.readonly,placeholder:m.placeholder,"data-input-counter":"","data-input-counter-min":"0","data-input-counter-max":"99","aria-describedby":"helper-text-explanation",onBlur:h,onChange:k,onInput:r},null,8,["id","modelValue","type","name","rules","disabled","readonly","placeholder"]),a[3]||(a[3]=t("div",{class:"absolute bottom-1 start-1/2 -translate-x-1/2 rtl:translate-x-1/2 flex items-center text-xs text-gray-400 space-x-1 rtl:space-x-reverse"},[t("svg",{class:"w-2.5 h-2.5 text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20"},[t("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8v10a1 1 0 0 0 1 1h4v-5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5h4a1 1 0 0 0 1-1V8M1 10l9-9 9 9"})]),t("span",null,"Product")],-1)),t("button",{type:"button",id:"increment-button","data-input-counter-increment":s(o),onClick:p,class:"bg-gray-100 dark:bg-gray-700 dark:hover:bg-gray-600 dark:border-gray-600 hover:bg-gray-200 border border-gray-300 rounded-e-lg p-3 h-11 focus:ring-gray-100 dark:focus:ring-gray-700 focus:ring-2 focus:outline-none"},a[2]||(a[2]=[t("svg",{class:"w-3 h-3 text-gray-900 dark:text-white","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18 18"},[t("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 1v16M1 9h16"})],-1)]),8,K)])],64))}}),Y={class:"col-span-2 flex justify-center items-center"},Z=["src"],ee={class:"col-span-2 md:col-span-3 px-4 flex flex-col justify-center"},te={class:"text-sm md:text-lg font-semibold text-gray-800 dark:text-gray-200"},re={class:"text-xs md:text-sm text-gray-500 dark:text-gray-400"},ae={class:"text-base md:text-lg font-semibold text-gray-800 dark:text-gray-200"},oe={class:"text-base md:text-lg font-semibold text-gray-800 dark:text-gray-200"},ne={class:"col-span-2 flex flex-row justify-between items-center gap-2 md:gap-4"},se=["onClick"],ye=V({__name:"CardCart",props:{cartModel:{type:Array,required:!1}},emits:["updateTotal"],setup(d,{emit:_}){const m=d,i=r=>{if(r)return z(r,X.VND,O.VI_VN)},o=L(),y=M(()=>m.cartModel||[]),u={};y.value.forEach((r,l)=>{var e;u[`quantity_${l}`]=((e=r.quantity)==null?void 0:e.toString())||"1"});const p=U({initialValues:u});o.SetFields(p),I({id:"quantity",name:"quantity",rules:"",visible:!0,option:""});const n=r=>I({id:`quantity_${r}`,name:`quantity_${r}`,rules:"",visible:!0,option:""}),h=async(r,l)=>{await o.UpdateCart(r,l),await o.GetAllCart()},k=async(r,l)=>{await o.DeleteCart(r,l)};return(r,l)=>(c(!0),g(C,null,B(s(y),(e,a)=>{var f;return c(),g("div",{key:a,class:"grid grid-cols-7 bg-white dark:bg-gray-900 rounded-lg p-4 w-full shadow-md border border-gray-40000 dark:border-gray-700 mb-5"},[t("div",Y,[w(s(N),{class:"relative w-20 h-20 md:w-36 md:h-36",pagination:!0,spaceBetween:10,slidesPerView:1,loop:!0},{default:S(()=>[(c(!0),g(C,null,B(e.images,(x,j)=>(c(),P(s(F),{key:j},{default:S(()=>[x.imageUrl?(c(),g("img",{key:0,class:"w-full h-full rounded-lg object-cover",src:x.imageUrl,alt:"Product Image"},null,8,Z)):$("",!0)]),_:2},1024))),128))]),_:2},1024)]),t("div",ee,[t("h2",te,b(e.accessoryName),1),t("p",re,b(e.accessoryId),1),t("span",ae,b(i(Number(e.price))),1),t("span",oe,"Total price: "+b(i(Number(e.unitPrice))),1)]),t("div",ne,[w(W,{"xml-column":n(a),maxlength:2,"text-model":(f=e.quantity)==null?void 0:f.toString(),disabled:!1,onOnAddCart:x=>h(a,e.accessoryId??"")},null,8,["xml-column","text-model","onOnAddCart"]),t("button",{class:"text-gray-500 dark:text-gray-400 hover:text-red-500 dark:hover:text-red-400 text-base md:text-lg",type:"button",onClick:x=>k(a,e.accessoryId??"")}," âœ– ",8,se)])])}),128))}});export{ye as _,W as a};
